<div class="editor-container">
  <!-- Left Sidebar - File Explorer -->
  <aside class="file-explorer" [class.hidden]="!showExplorer">
    <div class="explorer-header">
      <div class="explorer-title">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
        </svg>
        Explorador
      </div>
      <button class="collapse-btn" (click)="toggleExplorer()" title="Ocultar explorador">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
        </svg>
      </button>
    </div>
    
    <div class="file-tree">
      <div class="project-name">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
          <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
        </svg>
        meu-projeto
      </div>
      
      <div class="file-list">
        <div class="file-item folder" 
             [class.expanded]="folder.expanded" 
             *ngFor="let folder of folders"
             (click)="toggleFolder(folder)">
          <div class="file-icon">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path *ngIf="!folder.expanded" d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
              <path *ngIf="folder.expanded" d="M20 6h-8l-2-2H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6z"/>
            </svg>
          </div>
          <span class="file-name">{{ folder.name }}</span>
        </div>
        
        <div *ngFor="let folder of folders">
          <div class="folder-contents" *ngIf="folder.expanded">
            <div class="file-item nested" 
                 [class.active]="file === activeFile"
                 *ngFor="let file of folder.files"
                 (click)="openFile(file)">
              <div class="file-icon">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
                </svg>
              </div>
              <span class="file-name">{{ file.name }}</span>
            </div>
          </div>
        </div>

        <div class="file-item" 
             [class.active]="file === activeFile"
             *ngFor="let file of rootFiles"
             (click)="openFile(file)">
          <div class="file-icon">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
            </svg>
          </div>
          <span class="file-name">{{ file.name }}</span>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main Editor Area -->
  <main class="editor-main" [class.full-width]="!showExplorer">
    <!-- Top Toolbar -->
    <div class="toolbar">
      <div class="toolbar-left">
        <button class="toolbar-btn" (click)="toggleExplorer()" *ngIf="!showExplorer" title="Mostrar explorador">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
          </svg>
        </button>
        
        <div class="file-tabs" *ngIf="openTabs.length > 0">
          <div class="tab" 
               [class.active]="tab === activeFile"
               *ngFor="let tab of openTabs"
               (click)="switchTab(tab)">
            <span class="tab-name">{{ tab.name }}</span>
            <button class="close-tab" (click)="closeTab(tab, $event)">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
      
      <div class="toolbar-right">
        <button class="run-btn" (click)="runCode()" [disabled]="!activeFile">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8 5v14l11-7z"/>
          </svg>
          Executar
        </button>
        
        <button class="toolbar-btn" title="Salvar">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Editor Content -->
    <div class="editor-content">
      <div class="editor-wrapper" *ngIf="activeFile; else noFileSelected">
        <div class="editor-header">
          <div class="file-info">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
            </svg>
            <span class="file-path">{{ activeFile.path }}</span>
          </div>
        </div>
        
        <div class="code-editor">
          <div class="line-numbers">
            <div class="line-number" *ngFor="let line of getLineNumbers()">{{ line }}</div>
          </div>
          <div class="code-area">
            <pre class="code-content">{{ activeFile.content }}</pre>
          </div>
        </div>
      </div>
      
      <ng-template #noFileSelected>
        <div class="welcome-screen">
          <div class="welcome-content">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
              <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
            </svg>
            <h3>Selecione um arquivo para come√ßar</h3>
            <p>Escolha um arquivo no explorador ou crie um novo projeto</p>
          </div>
        </div>
      </ng-template>
    </div>
  </main>

  <!-- Console Modal -->
  <div class="console-modal" [class.show]="showConsole" (click)="closeConsole()">
    <div class="console-content" (click)="$event.stopPropagation()">
      <div class="console-header">
        <div class="console-title">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM4 19V7h16v12H4z"/>
          </svg>
          Console
        </div>
        <button class="close-console" (click)="closeConsole()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      
      <div class="console-body">
        <div class="console-output">
          <div class="output-line" *ngFor="let line of consoleOutput">
            <span class="timestamp">[{{ line.timestamp }}]</span>
            <span class="message" [class]="line.type">{{ line.message }}</span>
          </div>
        </div>
        
        <div class="console-input">
          <span class="prompt">></span>
          <input type="text" 
                 class="input-field" 
                 [(ngModel)]="commandInput"
                 (keydown.enter)="executeCommand()"
                 placeholder="Digite um comando...">
        </div>
      </div>
    </div>
  </div>
</div>