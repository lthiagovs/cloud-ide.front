<div class="profile-container">
  <!-- Header Profile Section -->
  <section class="profile-header">
    <div class="profile-info">
      <div class="avatar-section">
        <div class="user-avatar">
          <img *ngIf="user.avatar" [src]="user.avatar" [alt]="user.name">
          <div *ngIf="!user.avatar" class="avatar-placeholder">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
          </div>
          <button class="edit-avatar" (click)="editAvatar()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1 1 0 0 0 0-1.41l-2.34-2.34a1 1 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
            </svg>
          </button>
        </div>
        
        <div class="user-details">
          <h1 class="user-name">{{ user.name }}</h1>
          <p class="user-username">@{{ user.username }}</p>
          <p class="user-bio">{{ user.bio }}</p>
          
          <div class="user-stats">
            <div class="stat-item">
              <span class="stat-number">{{ user.stats.projects }}</span>
              <span class="stat-label">Projetos</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">{{ user.stats.stars }}</span>
              <span class="stat-label">Stars</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">{{ user.stats.followers }}</span>
              <span class="stat-label">Seguidores</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="profile-actions">
        <button class="btn-primary" (click)="createProject()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
          </svg>
          Novo Projeto
        </button>
        <button class="btn-secondary" (click)="editProfile()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1 1 0 0 0 0-1.41l-2.34-2.34a1 1 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
          </svg>
          Editar Perfil
        </button>
      </div>
    </div>
  </section>

  <!-- Navigation Tabs -->
  <section class="profile-navigation">
    <div class="nav-tabs">
      <button class="nav-tab" 
              [class.active]="currentTab === 'projects'"
              (click)="switchTab('projects')">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
        </svg>
        Meus Projetos
        <span class="tab-count">{{ projects.length }}</span>
      </button>
      
      <button class="nav-tab" 
              [class.active]="currentTab === 'starred'"
              (click)="switchTab('starred')">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        Favoritos
        <span class="tab-count">{{ starredProjects.length }}</span>
      </button>
      
      <button class="nav-tab" 
              [class.active]="currentTab === 'explore'"
              (click)="switchTab('explore')">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27A6.5 6.5 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        Explorar
      </button>
    </div>

    <!-- Search Bar for Explore Tab -->
    <div class="search-container" *ngIf="currentTab === 'explore'">
      <div class="search-bar">
        <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27A6.5 6.5 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        <input type="text" 
               class="search-input" 
               [(ngModel)]="searchQuery"
               (input)="onSearch()"
               placeholder="Pesquisar projetos...">
        <div class="search-filters">
          <select class="filter-select" [(ngModel)]="selectedLanguage" (change)="onFilter()">
            <option value="">Todas as linguagens</option>
            <option value="typescript">TypeScript</option>
            <option value="javascript">JavaScript</option>
            <option value="python">Python</option>
            <option value="java">Java</option>
            <option value="react">React</option>
          </select>
          <select class="filter-select" [(ngModel)]="selectedSort" (change)="onFilter()">
            <option value="recent">Mais recentes</option>
            <option value="popular">Mais populares</option>
            <option value="stars">Mais curtidos</option>
            <option value="name">Nome A-Z</option>
          </select>
        </div>
      </div>
    </div>
  </section>

  <!-- Content Area -->
  <section class="content-area">
    
    <!-- My Projects Tab -->
    <div class="tab-content" *ngIf="currentTab === 'projects'">
      <div class="content-header">
        <h2>Meus Projetos</h2>
        <div class="view-options">
          <button class="view-btn" [class.active]="viewMode === 'grid'" (click)="setViewMode('grid')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M3 3v8h8V3H3zm10 0v8h8V3h-8zM3 13v8h8v-8H3zm10 0v8h8v-8h-8z"/>
            </svg>
          </button>
          <button class="view-btn" [class.active]="viewMode === 'list'" (click)="setViewMode('list')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="projects-grid" [class.list-view]="viewMode === 'list'">
        <div class="project-card" *ngFor="let project of projects">
          <div class="project-header">
            <div class="project-info">
              <h3 class="project-name">{{ project.name }}</h3>
              <p class="project-description">{{ project.description }}</p>
            </div>
            <div class="project-actions">
              <button class="action-btn" (click)="openProject(project)" title="Abrir">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                </svg>
              </button>
              <button class="action-btn" (click)="shareProject(project)" title="Compartilhar">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
                </svg>
              </button>
              <button class="action-btn" (click)="deleteProject(project)" title="Excluir">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                </svg>
              </button>
            </div>
          </div>
          
          <div class="project-meta">
            <div class="project-tech">
              <span class="tech-tag" *ngFor="let tech of project.technologies">{{ tech }}</span>
            </div>
            <div class="project-stats">
              <span class="stat">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                {{ project.stars }}
              </span>
              <span class="stat">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A1.5 1.5 0 0 0 18.54 8H16.5c-.83 0-1.54.5-1.85 1.22l-1.92 5.78c-.34 1.03.28 2.14 1.38 2.14.5 0 .97-.26 1.23-.69l.95-2.28.77 2.28c.11.33.39.55.72.55H20v6h4z"/>
                </svg>
                {{ project.collaborators.length }}
              </span>
              <span class="update-time">{{ project.lastUpdate }}</span>
            </div>
          </div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" *ngIf="projects.length === 0">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
            <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
          </svg>
          <h3>Nenhum projeto ainda</h3>
          <p>Crie seu primeiro projeto e comece a desenvolver!</p>
          <button class="btn-primary" (click)="createProject()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
            Criar Projeto
          </button>
        </div>
      </div>
    </div>

    <!-- Starred Projects Tab -->
    <div class="tab-content" *ngIf="currentTab === 'starred'">
      <div class="content-header">
        <h2>Projetos Favoritos</h2>
      </div>

      <div class="projects-grid">
        <div class="project-card starred" *ngFor="let project of starredProjects">
          <div class="project-header">
            <div class="project-info">
              <h3 class="project-name">{{ project.name }}</h3>
              <p class="project-author">por @{{ project.author }}</p>
              <p class="project-description">{{ project.description }}</p>
            </div>
            <div class="project-actions">
              <button class="action-btn starred" (click)="toggleStar(project)" title="Remover dos favoritos">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
              </button>
              <button class="action-btn" (click)="forkProject(project)" title="Fork">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm0-9V4l-4 4-4-4v3.5L12 11.5l4-4z"/>
                </svg>
              </button>
            </div>
          </div>
          
          <div class="project-meta">
            <div class="project-tech">
              <span class="tech-tag" *ngFor="let tech of project.technologies">{{ tech }}</span>
            </div>
            <div class="project-stats">
              <span class="stat">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                {{ project.stars }}
              </span>
              <span class="stat">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A1.5 1.5 0 0 0 18.54 8H16.5c-.83 0-1.54.5-1.85 1.22l-1.92 5.78c-.34 1.03.28 2.14 1.38 2.14.5 0 .97-.26 1.23-.69l.95-2.28.77 2.28c.11.33.39.55.72.55H20v6h4z"/>
                </svg>
                {{ project.collaborators.length }}
              </span>
              <span class="update-time">{{ project.lastUpdate }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Explore Projects Tab -->
    <div class="tab-content" *ngIf="currentTab === 'explore'">
      <div class="content-header">
        <h2>Explorar Projetos</h2>
        <div class="results-info" *ngIf="searchQuery">
          {{ filteredProjects.length }} resultado(s) para "{{ searchQuery }}"
        </div>
      </div>

      <div class="projects-grid">
        <div class="project-card explore" *ngFor="let project of getDisplayProjects()">
          <div class="project-header">
            <div class="project-info">
              <h3 class="project-name">{{ project.name }}</h3>
              <p class="project-author">por @{{ project.author }}</p>
              <p class="project-description">{{ project.description }}</p>
            </div>
            <div class="project-actions">
              <button class="action-btn" 
                      [class.starred]="isProjectStarred(project)"
                      (click)="toggleStar(project)" 
                      title="Adicionar aos favoritos">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path *ngIf="!isProjectStarred(project)" d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"/>
                  <path *ngIf="isProjectStarred(project)" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
              </button>
              <button class="action-btn" (click)="forkProject(project)" title="Fork projeto">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm0-9V4l-4 4-4-4v3.5L12 11.5l4-4z"/>
                </svg>
              </button>
              <button class="action-btn" (click)="viewProject(project)" title="Visualizar">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                </svg>
              </button>
            </div>
          </div>
          
          <div class="project-meta">
            <div class="project-tech">
              <span class="tech-tag" *ngFor="let tech of project.technologies">{{ tech }}</span>
            </div>
            <div class="project-stats">
              <span class="stat">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                {{ project.stars }}
              </span>
              <span class="stat">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm0-9V4l-4 4-4-4v3.5L12 11.5l4-4z"/>
                </svg>
                {{ project.forks }}
              </span>
              <span class="update-time">{{ project.lastUpdate }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

  </section>

  <!-- Create Project Modal -->
  <div class="modal-overlay" [class.show]="showCreateModal" (click)="closeCreateModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Criar Novo Projeto</h3>
        <button class="close-modal" (click)="closeCreateModal()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      
      <form class="create-form" (ngSubmit)="onCreateProject()">
        <div class="form-group">
          <label class="form-label">Nome do Projeto</label>
          <input type="text" 
                 class="form-input" 
                 [(ngModel)]="newProject.name"
                 name="name"
                 placeholder="meu-projeto-incrivel"
                 required>
        </div>

        <div class="form-group">
          <label class="form-label">Descrição</label>
          <textarea class="form-input textarea" 
                    [(ngModel)]="newProject.description"
                    name="description"
                    placeholder="Descreva seu projeto..."
                    rows="3"></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Linguagem Principal</label>
            <select class="form-input" [(ngModel)]="newProject.language" name="language">
              <option value="typescript">TypeScript</option>
              <option value="javascript">JavaScript</option>
              <option value="python">Python</option>
              <option value="java">Java</option>
              <option value="react">React</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">Template</label>
            <select class="form-input" [(ngModel)]="newProject.template" name="template">
              <option value="blank">Projeto em branco</option>
              <option value="react">React App</option>
              <option value="angular">Angular App</option>
              <option value="vue">Vue App</option>
              <option value="node">Node.js</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Colaboradores (opcional)</label>
          <div class="collaborator-input">
            <input type="text" 
                   class="form-input" 
                   [(ngModel)]="collaboratorEmail"
                   name="collaborator"
                   placeholder="email@exemplo.com">
            <button type="button" class="add-collaborator" (click)="addCollaborator()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
              </svg>
            </button>
          </div>
          
          <div class="collaborator-list" *ngIf="newProject.collaborators.length > 0">
            <div class="collaborator-tag" *ngFor="let collab of newProject.collaborators">
              {{ collab }}
              <button type="button" (click)="removeCollaborator(collab)">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <div class="form-options">
          <label class="checkbox-wrapper">
            <input type="checkbox" [(ngModel)]="newProject.isPrivate" name="private">
            <span class="checkbox-label">Projeto privado</span>
          </label>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn-secondary" (click)="closeCreateModal()">
            Cancelar
          </button>
          <button type="submit" class="btn-primary" [disabled]="!newProject.name">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
            Criar Projeto
          </button>
        </div>
      </form>
    </div>
  </div>
</div>